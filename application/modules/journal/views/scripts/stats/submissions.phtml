<?php
$submissionsTooltipInfo = "Cela inclut seulement les articles soumis cette année.";
$isYear = isset($this->year);
$acceptedTooltipInfo = "Cela inclut les articles en cours de mise en forme et en attente de publication.";
$publishedTooltipInfo = "Cela inclut les articles qui ont été soumis antérieurement et publiés cette année.";
$refusedTooltipInfo = "Cela inclut les articles qui ont été soumis antérieurement et refusés cette année.";
$otherStatusTooltipInfo = "Cela inclut les autres statuts.";
$acceptanceRateTooltipInfo = '(A/S)x100 <em>[ A' . $this->translate(' :') . ' ' . $this->translate("le nombre d'articles acceptés") . ', S' . $this->translate(' :') . ' ' . $this->translate('toutes les soumissions') . ' ]</em>' ;
$acceptanceRate = round((($this->allAcceptations + $this->allPublications)/ $this->allSubmissions) * 100, 2);
?>
<div class="panel panel-default collapsable">
    <div class="panel-heading"><h2 class="panel-title"><?= $this->chart1Title ?><?= $this->year ? ' - <code>' . $this->year . '</code>' : '' ?></h2></div>
    <div class="panel-body in">
        <div class="col-md-4">
            <div style="padding-top: 10px; ">

                <div>
                    <ul class="list-unstyled">
                        <li>
                            <?= $this->translate('Soumissions') ?>
                            <code><?= $this->allSubmissions ?></code>
                            <?php if ($isYear): ?>
                                <em class="fas fa-info-circle" data-toggle="tooltip" title="<?= $this->translate($submissionsTooltipInfo) ?>"></em>
                            <?php endif; ?>
                        </li>
                        <li>
                            <?= $this->translate("Taux d'acceptation") ?>
                            <code style="font-size: 105%;"><?= $acceptanceRate ?></code><em class="fas fa-percent fa-sm" style="margin-left: 5px;"></em>
                            <em class="fas fa-info-circle fa-sm" data-toggle="tooltip" title="<?= $this->translate($acceptanceRateTooltipInfo) ?>"></em>

                        </li>
                        <hr>
                        <li>
                            <?= ucfirst($this->translate('articles publiés')) ?>
                            <code><?= $this->allPublications ?></code>
                            <?php if ($isYear): ?>
                                <em class="fas fa-info-circle" data-toggle="tooltip" title="<?= $this->translate($publishedTooltipInfo) ?>"></em>
                            <?php endif; ?>
                        </li>
                        <li>
                            <?= ucfirst($this->translate('articles acceptés')) ?>
                            <code><?= $this->allAcceptations ?></code>
                            <?php if ($isYear): ?>
                                <em class="fas fa-info-circle" data-toggle="tooltip" title="<?= $this->translate($acceptedTooltipInfo) ?>"></em>
                            <?php endif; ?>
                        </li>
                        <li>
                            <?= ucfirst($this->translate('articles refusés')) ?>
                            <code><?= $this->allRefusals ?></code>
                            <?php if ($isYear): ?>
                                <em class="fas fa-info-circle" data-toggle="tooltip" title="<?= $this->translate($refusedTooltipInfo) ?>"></em>
                            <?php endif; ?>
                        </li>

                        <li>
                            <?= ucfirst($this->translate('autres statuts')) ?>
                            <code><?= $this->allOtherStatus ?></code>
                            <?php if ($isYear): ?>
                                <em class="fas fa-info-circle" data-toggle="tooltip" title="<?= $this->translate($otherStatusTooltipInfo) ?>"></em>
                            <?php endif; ?>
                        </li>
                    </ul>

                </div>
            </div>
        </div>
        <div class="col-md-offset-2 col-md-6" style="margin-top: 40px; ">
            <canvas id="all-submissions-percentage" style="height: auto; width: auto;"></canvas>
        </div>
    </div>
</div>

<div class="panel panel-default collapsable">
    <div class="panel-heading"><h2 class="panel-title"><?= $this->chart2Title ?></h2></div>
    <div class="panel-body in">
        <canvas id="submissions-by-year-chart" style="height: auto; width: auto;"></canvas>
    </div>
</div>

<div class="panel panel-default collapsable">
    <div class="panel-heading"><h2 class="panel-title"><?= $this->chart3Title ?></h2></div>
    <div class="panel-body in">
        <canvas id="submissions-by-repo-chart" style="height: auto; width: auto;"></canvas>
    </div>
</div>

<div class="panel panel-default collapsable">
    <div class="panel-heading in"><h2 class="panel-title"><?= $this->chart4Title ?></h2></div>
    <div class="panel-body in">
        <canvas id="submissions-delay-chart" style="height: auto; width: auto;"></canvas>
    </div>
</div>






