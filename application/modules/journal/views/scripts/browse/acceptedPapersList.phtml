<?php
/**
 * @var Episciences_Review $journal
 */
$journal = $this->journal;
?>
<div id="browse-accepted-papers">
    <ul>
        <?php foreach ($this->acceptedPapers as $acceptedPaper) :
            /** @var Episciences_Paper $acceptedPaper */
            $epiUrl = $this->url(
                [
                    'controller' => 'administratepaper',
                    'action' => 'view',
                    'id' => $acceptedPaper->getDocid()
                ]);
            ?>
            <li class="accepted-papers-list">
                <?php if ($this->isSecretary) : ?>
                    <a class="accepted-papers-list-internal-ref"
                       href="<?= $epiUrl ?>">[#<?= $acceptedPaper->getDocid() ?>]</a>
                <?php endif; ?>

                <a href="<?= $this->escape($acceptedPaper->getDocUrlTmpVersionsIncluded()) ?>" target="_blank"
                   rel="noopener"> <em><?= $this->escape($acceptedPaper->getTitle()) ?></em></a>.&nbsp;
                <?php $authors = $acceptedPaper->getMetadata('authors'); ?>
                <?php if (is_array($authors)): ?>
                    <?php $lastkey = count($authors); ?>
                    <?php foreach ($authors as $key => $creatorName): ?>
                        <?= $this->escape(Episciences_Tools::reformatOaiDcAuthor($creatorName)) ?>
                        <?php if ($lastkey !== $key + 1) : ?>;<?php endif; ?>
                    <?php endforeach; ?>
                <?php endif; ?>
                <?php $acceptedDateToTime = strtotime($acceptedPaper->getAcceptanceDate()); ?>
                <?php if ($acceptedDateToTime) : ?>
                    &nbsp;<span
                            class="accepted-on">(<?= $this->translate('AcceptÃ© le : ') . date('Y-m-d', $acceptedDateToTime) ?>)</span>
                <?php endif; ?>
                <?php ?>
            </li>
        <?php endforeach; ?>
    </ul>
</div>
